# 2. Component Test Plan (by schematic block)

## 2.1 Power Tree – 24 V Input & DC/DC Rails

| Test ID     | Objective                                                       | Tools / Equipment                                                     | Setup                                                   | Steps                                                                                                                                                                                                 | Expected Result                                                                                                                                                                            |
|------------|------------------------------------------------------------------|------------------------------------------------------------------------|---------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-PWR-001 | Verify all rails at correct voltage and polarity at nominal VIN (SOM not fitted) | Bench 0–30 V PSU (current limit), DMM, 4-ch oscilloscope              | H1 board without SOM; PSU set to 24 V, current limit ~1 A | 1) Connect PSU to 24 V input.<br>2) Power on.<br>3) Measure 3V3_STBY, 3V3, 5V, 1V8 at test points.<br>4) Capture start-up waveforms.                           | All rails present with correct polarity; voltages within design tolerance (e.g. ±3%); no abnormal ringing/oscillation.                             |
| CT-PWR-002 | Verify power-up sequencing and control signals                  | 4–8-ch oscilloscope, logic probe or LA                                | Same board; probes on VIN, rails, CARRIER_POWER_ON, MODULE_SHDN_N, PGOODs | 1) Arm scope.<br>2) Apply power or toggle POWER_BTN_N.<br>3) Record timing of rails and control pins.                                                          | Rails ramp in intended order; enables/PGOODs follow design timing; no rail driven before its supply is valid.                                     |
| CT-PWR-003 | Check load regulation & max continuous current for each rail    | Electronic load or power resistors, DMM, scope, IR thermometer        | H1 with rails accessible; SOM not fitted                | 1) Apply 24 V.<br>2) Load 5 V rail from 0 → rated current; measure V and ripple.<br>3) Repeat for 3.3 V and 1.8 V.                                            | Voltage within tolerance and ripple below spec across load range; regulators stay within safe temperature; no early current-limit.                |
| CT-PWR-004 | Verify UVLO / brown-out behaviour                               | Programmable PSU, scope on rails & reset/supervisor pins, dummy loads | H1 with representative loads on each rail               | 1) Start at 24 V.<br>2) Decrease VIN slowly into UVLO region.<br>3) Observe rail collapse and reset/supervisor outputs.                                        | When VIN below threshold, rails shut down cleanly; supervisor drives reset / power-down; no latch-up or uncontrolled states.                      |
| CT-PWR-005 | Verify short-circuit / over-current protection per rail         | Electronic load in short mode, fast DMM or current probe, IR thermometer | H1 powered at 24 V, each rail accessible               | 1) Briefly short each rail output (one at a time).<br>2) Observe current limit and regulator temperature.<br>3) Remove short and monitor recovery.            | Current is limited to safe value; devices stay below rated temperature; rail recovers per regulator spec; no permanent damage.                    |
| CT-PWR-006 | Characterise 24 V bus voltage & current sense paths to supervisor | Programmable PSU, electronic load, DMM, S32K116 debugger/UART         | H1 with S32K116 powered from 3V3_STBY                   | 1) Apply several VIN/load combinations.<br>2) Read ADC values via debug/UART.<br>3) Compare calculated V/I vs DMM.                                             | ADC-derived V/I within specified error (e.g. ±3%); monotonic; no clipping at extremes.                                                            |
| CT-PWR-007 | Verify 3V3_STBY only powers “always-on” circuitry               | PSU for standby input, DMM, current clamp (optional)                  | H1 with only 3V3_STBY powered                           | 1) Power just 3V3_STBY.<br>2) Measure other rails & leakage current.<br>3) Identify powered ICs.                                                                | Only supervisor/always-on circuits are powered; main DC/DCs and SOM rails remain off; leakage into main rails within spec.                        |
| CT-PWR-008 | Check surge / transient protection on 24 V input (TVS, MOSFET)  | EFT / surge generator (if available), PSU, DMM, scope                 | H1 powered via surge generator with 24 V nominal        | 1) Apply standard surge pulses (e.g. ±500 V EFT on 24 V line).<br>2) Monitor 24 V bus and downstream rails.                                                     | TVS/MOSFET clamp transients; downstream rails stay within safe voltage; no component damage or latch-up.                                         |

---

## 2.2 USB-C Ports (Power + Type-C Hardware)

| Test ID     | Objective                                                     | Tools / Equipment                                                                 | Setup                                                              | Steps                                                                                                                                                                                           | Expected Result                                                                                                                                                               |
|------------|----------------------------------------------------------------|------------------------------------------------------------------------------------|--------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-USB-001 | Verify VBUS power switching and current limit per USB-C port  | USB-C power meter, programmable load, bench PSU, DMM                              | H1 powered; means to assert USB_VBUS_ENx (jumper or simple GPIO pattern) | 1) Connect meter+load to Port 1.<br>2) Enable port.<br>3) Increase load current beyond rating.<br>4) Repeat for Ports 2 & 3.                                                 | VBUS ≈ 5 V ±5% up to rated current; over-current causes AP22615 limit/shutdown with FLG asserted; port & board recover when fault cleared.             |
| CT-USB-002 | Confirm Type-C role/orientation detection at electrical level | USB-C host, USB-C device, cables, DMM, simple access to HD3SS3220 status pins     | H1 powered; HD3SS3220 accessible via header/debug                  | 1) Configure port role per design (DFP/UFP).<br>2) Plug cable in both orientations with host/device.<br>3) Observe CC1/CC2 and status outputs.                                              | Correct role (source/sink) established; CC termination swaps with orientation; VBUS only enabled when permitted by role; no over-current on CC pins.   |
| CT-USB-003 | Basic ESD robustness on USB-C shell and pins                  | IEC ESD gun ±4 kV contact / ±8 kV air (lab), USB-C dummy plug, scope (for fail symptoms) | H1 on ESD bench with grounding as per lab practice                | 1) Apply ESD strikes to USB-C shell and, with dummy plug, to pins as allowed.<br>2) Check that board still powers and USB-C power switch operates.                                          | No permanent damage to connectors, TVS, or power switches; after event, VBUS switching still works and no rail is shorted.                             |

---

## 2.3 CSI Camera Power & Control (H1 Side)

| Test ID     | Objective                                                     | Tools / Equipment                                               | Setup                                                          | Steps                                                                                                                                                                                             | Expected Result                                                                                                                                                        |
|------------|----------------------------------------------------------------|------------------------------------------------------------------|----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-CSI-001 | Verify camera power switches and over-current flags           | Bench PSU, DMM, scope, electronic load / resistor for overload | H1 powered; camera connectors accessible; no cameras initially | 1) Enable each camera rail via control pin.<br>2) Measure voltage/current.<br>3) Introduce controlled short on one rail and observe AP22615 FLG.                                               | Rails switch correctly; nominal current within design; short causes AP22615 to limit/shutoff and raise FLG; other rails unaffected; no damage.        |
| CT-CSI-002 | Verify I²C mux and GPIO expander hardware behaviour           | USB-I²C dongle or basic I²C master, logic probe                | H1 powered; SCL/SDA test header connected to dongle            | 1) Scan I²C bus; record addresses.<br>2) Select each mux channel and rescan.<br>3) Read/write GPIO expander registers; verify levels with probe.                                              | Devices at correct addresses; mux channels expose expected downstream devices; GPIO pins switch/read as expected.                                   |
| CT-CSI-005 | Confirm camera rails are off by default at power-up          | Bench PSU, DMM/scope                                           | H1 with cameras attached                                      | 1) Cold power-up H1.<br>2) Monitor camera enables and rails from 0 → steady state (no SW enable).                                                                                              | Camera rails remain off (or defined safe) until intentionally enabled; there is no unintended inrush to cameras on reset or initial power-up.        |
| CT-CSI-006 | Check differential impedance/continuity of CSI pairs         | TDR or VNA (if available), controlled-impedance test fixture   | Unpowered H1; CSI pairs accessible at connectors & SOM edge    | 1) Connect TDR to CSI pair.<br>2) Measure characteristic impedance and continuity along route.                                                                                                  | CSI routes have impedance within allowed MIPI tolerance (e.g. 90 Ω ±10% diff); no opens/shorts; connectors correctly pinned.                        |

---

## 2.4 Ethernet PHY (Hardware Only)

| Test ID     | Objective                                                     | Tools / Equipment                     | Setup                                         | Steps                                                                                                                                         | Expected Result                                                                                                                                     |
|------------|----------------------------------------------------------------|----------------------------------------|-----------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-ETH-001 | Check PHY power rails and reset timing versus datasheet       | Bench PSU, oscilloscope, DMM          | H1 powered; probes on PHY AVDD/DVDD and RESET_N | 1) Apply 24 V.<br>2) Capture rail ramp and RESET_N waveform.                                            | Rails meet datasheet ramp & sequencing; RESET_N held low until rails valid, then released cleanly; no chatter or brown-out.                        |
| CT-ETH-002 | Verify magnetics isolation and RJ45 connection integrity      | Hi-pot tester (if available), continuity tester | Unpowered H1; access to RJ45 and PHY side     | 1) Perform isolation test across magnetics per datasheet/standard.<br>2) Verify each RJ45 pin maps correctly through magnetics to PHY side. | Isolation withstands specified voltage; no shorts between isolated domains; RJ45 pin mapping correct.                                               |

---

## 2.5 5G Modem Hardware Interface (Power + PCIe)

| Test ID     | Objective                                                               | Tools / Equipment                                                           | Setup                    | Steps                                                                                                                                           | Expected Result                                                                                                                                   |
|------------|--------------------------------------------------------------------------|------------------------------------------------------------------------------|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-5G-001  | Verify 5G modem power rails, enable, and basic PCIe link presence        | Bench PSU, DMM, scope on modem supplies/enables, simple PCIe status access | H1 with modem fitted     | 1) Power H1.<br>2) Measure modem supply rails and enable/reset levels.<br>3) Confirm PCIe link-up via controller low-level status.             | Modem rails within spec; enables/resets follow design; PCIe link trains and stays up; no excessive current from modem slot.                      |

---

## 2.6 Wi-Fi/BT M.2 & NVMe M.2 Hardware Interface

| Test ID       | Objective                                                     | Tools / Equipment                                                                 | Setup                                    | Steps                                                                                                                                               | Expected Result                                                                                                                                             |
|--------------|----------------------------------------------------------------|------------------------------------------------------------------------------------|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-PCIE-001  | Verify PCIe electrical link to Wi-Fi and NVMe modules         | Bench PSU, low-level PCIe status tool (BIST on SoM or external tester), DMM      | H1 with Wi-Fi card & NVMe SSD fitted     | 1) Power H1.<br>2) Query PCIe controller link status for both devices (speed/width, link-up flag).                                                | Each slot trains to intended PCIe generation/lane width; no repeated link flaps; slot 3.3 V rails within spec.                                            |
| CT-PCIE-002  | Basic SI check on PCIe lanes                                  | High-bandwidth scope + differential probes or PCIe BERT (optional)               | Powered H1; access to debug pads on PCIe lanes | 1) Run known PCIe PRBS/BERT pattern.<br>2) Capture eye or BER.                                                                                      | Eye opening / BER within acceptable limits as per speed; no major reflections due to layout issues.                                                        |
| CT-NVME-001  | Check NVMe power delivery and connector integrity             | Current probe on NVMe 3.3 V rail, DMM, IR thermometer                            | H1 with SSD; simple R/W activity pattern | 1) Power H1.<br>2) Measure idle NVMe current and connector temperature.<br>3) Apply moderate R/W activity and monitor peak current/temperature.   | NVMe 3.3 V rail stays within tolerance; peak current within regulator capacity; connector temperature acceptable; no intermittent contact.                |

---

## 2.7 CAN Interface (Electrical & Transceiver)

| Test ID     | Objective                                                     | Tools / Equipment                                | Setup                                      | Steps                                                                                                                                                       | Expected Result                                                                                                                                           |
|------------|----------------------------------------------------------------|---------------------------------------------------|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-CAN-001 | Validate CAN transceiver basic electrical operation           | CAN analyser or second CAN node, 120 Ω termination | H1 CAN port connected to analyser/peer     | 1) Configure bus bitrate.<br>2) Transmit fixed frames from H1 and peer.                                                                                    | Frames seen correctly at both ends; dominant/recessive levels meet spec; error counters low.                                                             |
| CT-CAN-002 | Check CAN error handling and bus-off recovery (transceiver side) | Same as above                                    | Same as CT-CAN-001                         | 1) Briefly short CANH or CANL to GND while traffic running.<br>2) Observe analyser status.<br>3) Remove fault.                                            | Node enters error-passive/bus-off, then recovers after fault removal; no transceiver damage.                                                            |
| CT-CAN-003 | Verify termination / common-mode choke wiring                 | DMM, continuity tester                           | Unpowered H1; CAN connector & transceiver pins | 1) Measure resistance between CANH/CANL and between lines & GND.<br>2) Trace through common-mode chokes & termination parts.                               | Measured termination matches design (e.g. 60–120 Ω total); chokes correctly inserted; no shorts to GND/VCC.                                             |

---

## 2.8 Fan Drive Circuit

| Test ID     | Objective                                                     | Tools / Equipment                                               | Setup                            | Steps                                                                                                             | Expected Result                                                                                                                                  |
|------------|----------------------------------------------------------------|------------------------------------------------------------------|----------------------------------|------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-FAN-001 | Correlate PWM duty cycle with fan RPM (hardware path)         | PWM source (micro or signal generator), tachometer or scope on tach output | Fan connected to H1 fan header | 1) Drive PWM at 0/25/50/75/100%.<br>2) Measure fan RPM or tach period at each duty.                             | RPM increases monotonically with duty; no stall at minimum specified duty; tach output clean and at expected frequency.                         |

---

## 2.9 Supervisor MCU & Safety Outputs

| Test ID     | Objective                                                     | Tools / Equipment                                                                     | Setup                                                   | Steps                                                                                                                                                                                                     | Expected Result                                                                                                                                                                             |
|------------|----------------------------------------------------------------|----------------------------------------------------------------------------------------|---------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CT-SAF-001 | Confirm S32K116 boots and can toggle all safety-related pins  | Bench PSU for 3V3_STBY, simple test firmware, logic analyser / probe                  | H1 powered in standby-only mode                         | 1) Power 3V3_STBY.<br>2) Run test firmware that toggles each safety output & indicator LED.                                                                                                             | MCU always starts on power-up; all safety pins switch between valid logic levels; no stuck/shorted outputs.                                         |
| CT-SAF-002 | Validate ADC channels for 24 V and current sense              | Programmable VIN, electronic load, DMM, S32K116 debugger/UART                          | H1 with full power path connected, S32K116 sampling ADCs | 1) Apply several VIN/load combos.<br>2) Read ADC codes and convert.<br>3) Compare to DMM.                                                                                                              | ADC readings match real voltage/current within allowed error; monotonic; no clipping.                                                               |
| CT-SAF-004 | Verify E-stop input correctly forces safe output levels       | E-stop switch, logic analyser, dummy loads on Robot_Enable/STO lines                   | H1 powered; supervisor in simple “enabled” state        | 1) Set safety outputs to “enable”.<br>2) Operate E-stop.<br>3) Observe change on Robot_Enable/STO pins.                                                                                               | Within defined reaction time, all drive-enable/Robot_Enable lines go to safe disabled level and stay there until reset/power-cycle.                |
| CT-SAF-005 | Check mapping of safety modes to external connector levels    | Supervisor in test-mode firmware, logic analyser or DMM on H2/H3/H4 safety pins        | H1 powered; access to safety pins at connectors         | 1) Command each defined mode (Normal, STO, etc.).<br>2) Record voltage levels on all safety lines.                                                                                                    | For each mode, observed levels match safety truth-table; no undefined or conflicting states.                                                       |
| CT-SAF-006 | Ensure 24 V brown-out forces safe outputs                     | Programmable PSU, analyser on safety lines, moderate load                               | H1 running supervisor with safety outputs in enable state | 1) Slowly reduce VIN into brown-out region.<br>2) Observe safety lines & reset.                                                                                                                       | As VIN falls below threshold, supervisor drives all safety outputs to safe state before logic destabilises; no chatter on lines.                   |
| CT-SAF-007 | Robustness to short-to-battery / short-to-ground on safety lines | DMM, current-limited fault injection (resistors or current source)                     | Unpowered H1 initially; then powered                    | 1) Individually short each safety output to GND via resistor; repeat to 24 V (through series resistor).<br>2) Power board and observe current and device behaviour.                                  | Safety drivers tolerate expected fault currents or fail-safe (e.g. open-circuit) without damaging other circuitry; current limited as per design. |
